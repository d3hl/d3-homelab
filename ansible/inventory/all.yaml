komodo:
  # Add additonal vars: section for ssh keyfiles, etc.
  hosts:
    komodo1:
      ansible_host: 10.10.10.30
    komodo2:
      ansible_host: 10.10.10.31
    komodo3:
      ansible_host: 10.10.10.32
      connection: local
  children:
    komodo:
      vars:
        komodo_core_url: "http://10.10.10.30:9120"
        komodo_core_api_key: "K-TodnQ41FWfGBqOc0LCcUkPAR4FEfPSwwBxnNquyM"
        komodo_core_api_secret: "S-eFdzn48GRUM6e4VYCHzdMzmVTw8f8bSbfBdHCTGB"
        enable_server_management: true
        komodo_passkeys:
          - mailabanthan123
      children:
        core:
          hosts:
            komodo1:
              periphery_port: 8120
              komodo_allowed_ips:
              generate_server_passkey: true
                - "10.10.10.30"
              #server_address: https://host.docker.internal:{{ periphery_port }}
              server_address: https://host.docker.internal:9120
        periphery:
          hosts:
            komodo2:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "::ffff:10.10.10.30"
            #    - "{{ hostvars['komodo_host1'].ansible_host }}"
             #   - 10.10.10.0/24
            komodo3:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['komodo1'].ansible_host }}"