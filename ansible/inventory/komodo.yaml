komodo:
  # Add additonal vars: section for ssh keyfiles, etc.
  hosts:
    kmd1:
      ansible_host: 10.10.10.30
    kmd2:
      ansible_host: 10.10.10.31
    kmd3:
      ansible_host: 10.10.10.32
    kmd4:
      ansible_host: 10.10.10.33
    kmd5:
      ansible_host: 10.10.10.34
    k-120:
      ansible_host: 10.203.1.120
    k-121:
      ansible_host: 10.203.1.121
  children:
    komodo:
      vars:
        komodo_core_url: "http://10.10.10.30:9120"
        ansible_become_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63373731376164383137313031613837323365633833386137376562313562383931623065623236
          3430343233613633663536636636326432336138353963340a663334346665376433373162626563
          66313135626235396166653332313462623130633330646332623163323630326665343632363535
          6330323164343161320a306463396232313633383262633936666437383138383135303366366230
          32636134386538663464656635346535663361623832653964366536343430303264
        komodo_core_api_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          33646437326530623331386166356162306436373661656364333834393765663361333663613866
          3964303536623634613161613337376635386161346536320a623032626633663439373863336465
          65656539373665346635353633666633653336356132616164393438346365663134303265353039
          3234326235396465300a663234666461383833333638356138363230306432653831363663653435
          62313463363638313162653861623434666439396133613763306635316130346537336338323231
          6431356139646136653235616564303462306435323438373730
        komodo_core_api_secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          34356164643930666338636338383463613166633031633132353636656462343737353264356233
          3663376166323533333931656263613433393130623461350a613437613034346362306230633738
          30653133376363316366373636636666363062653462636638636334303435343534313665333832
          6562346561366132660a626531336162336130356132373830653664353066643361366635623336
          66656234306238653838386330336434363266623130353235313735343231376163316431313031
          6231316639623539366338303430636661373837643761613635
        enable_server_management: true
      children:
        core:
          hosts:
            kmd1:
              komodo_periphery_port: 8120
              generate_server_passkey: true
              server_address: https://host.docker.internal:{{ komodo_periphery_port }}
        periphery:
          hosts:
            kmd2:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}"
            kmd3:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}"
            kmd4:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}"
            kmd5:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}" 
            k-120:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}" 
            k-121:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}" 