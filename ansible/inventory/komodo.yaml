komodo:
  # Add additonal vars: section for ssh keyfiles, etc.
  hosts:
    kmd1:
      ansible_host: 10.10.10.30
    kmd2:
      ansible_host: 10.10.10.31
    kmd3:
      ansible_host: 10.10.10.32
    kmd4:
      ansible_host: 10.10.10.33
    kmd5:
      ansible_host: 10.10.10.34
    k-120:
      ansible_host: 10.203.1.120
    k-121:
      ansible_host: 10.203.1.121
  children:
    komodo:
      vars:
        komodo_core_url: "http://10.10.10.30:9120"
        ansible_become_pass: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          63373731376164383137313031613837323365633833386137376562313562383931623065623236
          3430343233613633663536636636326432336138353963340a663334346665376433373162626563
          66313135626235396166653332313462623130633330646332623163323630326665343632363535
          6330323164343161320a306463396232313633383262633936666437383138383135303366366230
          32636134386538663464656635346535663361623832653964366536343430303264
        komodo_core_api_key: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          62656632333233333334353939313634386332623734623465636234633433373333333931323664
          3132643837313230666635646133333232333564613566390a366464666231633739376666316464
          61633738626665336432356462353830323736353731356639363362333662383563613565386533
          3262666361303135330a333762313961663034653131643238396265376164613739373132366365
          32393633386136323835646335613337306562646134313939366132353364356236313230333031
          3438656132623563653736663236656636333162336365333131
        komodo_core_api_secret: !vault |
          $ANSIBLE_VAULT;1.1;AES256
          34636230343232663032643231313138333264343238396535383431626562363862613864346561
          3938653564316235353336303830353231363639663432360a393664363132353733656561333566
          61313666666339343964313733383530356562656630323361616130636136656664633864353465
          3766393933343339620a373963373163346333386336363435643633356661316137303833356464
          31343037356433326166353134633835376431613765323266643630633031643363363665383237
          6534333566656562633932626536646130653532633639303131
        enable_server_management: true
      children:
        core:
          hosts:
            kmd1:
              komodo_periphery_port: 8120
              generate_server_passkey: true
              server_address: https://host.docker.internal:{{ komodo_periphery_port }}
        periphery:
          hosts:
            kmd2:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}"
            kmd3:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}"
            kmd4:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}"
            kmd5:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}" 
            k-120:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}" 
            k-121:
              generate_server_passkey: true
              komodo_allowed_ips:
                - "{{ hostvars['kmd1'].ansible_host }}"
              komodo_bind_ip: "{{ ansible_host }}" 